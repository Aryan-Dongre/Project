{% extends "admin/base.html" %}

{% block page_title %}Products{% endblock %}

{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='admin/css/product.css') }}">
{% endblock %}

{% block content %}

<div class="container-xxl py-4 product-page">

    <!-- Header Section -->
    <div class="product-header d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4">
        <h4 class="page-title mb-0">Product Management</h4>

        <a href="{{ url_for('admin.product_form') }}" class="btn btn-dark add-product-btn">
            + Add Product
        </a>
    </div>

    <!-- Dashboard Cards -->
    <div class="row g-3 mb-4 product-stats">

        <div class="col-12 col-md-4">
            <div class="stats-card">
                <p class="stats-label">Total Products</p>
                <h4 class="stats-value">{{ total_products }}</h4>
            </div>
        </div>

        <div class="col-12 col-md-4">
            <div class="stats-card stats-success">
                <p class="stats-label">Active Products</p>
                <h4 class="stats-value">{{ active_products }}</h4>
            </div>
        </div>

        <div class="col-12 col-md-4">
            <div class="stats-card stats-danger">
                <p class="stats-label">Inactive Products</p>
                <h4 class="stats-value">{{ inactive_products }}</h4>
            </div>
        </div>

    </div>


    <!-- Product Table Card -->
    <div class="card product-table-card">
        <div class="card-body">

            <div class="table-responsive">
                <table class="table table-align-middle product-table">

                    <thead class="table-light d-none d-md-table-header-group">
                        <tr class="product-row">
                            <th>Image</th>
                            <th>Name</th>
                            <th>Quantity</th>
                            <th>Brand</th>
                            <th>Price</th>
                            <th>Status</th>
                            <th class="text-end">Actions</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for product in products %}
                        <tr class="product-row">

                            <!-- Image -->
                            <td class="product-image">
                                <img src="{{ url_for('static', filename='uploads/products/' + product.image) }}"
                                    class="product-img" alt="product image">
                            </td>

                            <!-- Name -->
                            <td class="product-name" data-label="Name">
                                {{ product.name }}
                            </td>

                            <!-- Quantity -->
                            <td class="product-quantity" data-label="Quantity">
                                {{ product.quantity }}
                            </td>

                            <!-- Brand -->
                            <td class="product-brand" data-label="Brand">
                                {{ product.brand_name }}
                            </td>

                            <!-- Price -->
                            <td class="product-price" data-label="Price">
                                â‚¹ {{ product.price }}
                            </td>

                            <!-- Status -->
                            <td class="product-status" data-label="Status">
                                {% if product.status == 'ACTIVE' %}
                                <span class="badge bg-success">ACTIVE</span>
                                {% else %}
                                <span class="badge bg-danger">INACTIVE</span>
                                {% endif %}
                            </td>

                            <!-- Actions -->
                            <td class="text-end product-actions" data-label="Actions">

                                <a href="{{ url_for('admin.product_form', id=product.id) }}"
                                    class="btn btn-sm btn-outline-primary action-btn">
                                    Edit
                                </a>

                                <a href="{{ url_for('admin.toggle_product', id=product.id) }}"
                                    class="btn btn-sm btn-outline-warning action-btn">
                                    Toggle
                                </a>

                                <a href="{{ url_for('admin.delete_product', id=product.id) }}"
                                    class="btn btn-sm btn-outline-danger action-btn"
                                    onclick="return confirm('Are you sure?')">
                                    Delete
                                </a>

                            </td>

                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="7" class="text-center text-muted py-4">
                                No Product Found.
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>

                </table>
            </div>

        </div>
    </div>

</div>



{% endblock %}