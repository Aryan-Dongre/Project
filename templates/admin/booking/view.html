{% extends "admin/base.html" %}

{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
{% endblock %}

{% block page_title%}Booking Details {% endblock %}

{% block content %}
<div class="container mt-4">
  <h3 class="mb-4">Client Details</h3>
  <div class="card mb-4">
    <div class="card-body">

      <p><strong>Client Name : </strong>{{ booking.client_name }}</p>
      <p><strong>Email : </strong>{{ booking.client_email }}</p>
      <p><strong>Phone : </strong>{{ booking.client_phone }}</p>
      <p><strong>Date : </strong>{{ booking.booking_date }}</p>
      <p><strong>Time : </strong>{{ booking.booking_time }}</p>

      <!--Status Update Form-->
      <form method="POST" class="mt-3">

        <div class="mb-3">
          <label class="form-label"><strong>Booking Status :</strong>{{ booking.status}}</label>
          <select name="status" class="form-select">
            <option value="PENDING" {{ 'selected' if booking.status=='PENDING' else '' }}>PENDING</option>
            <option value="PAID" {{ 'selected' if booking.status=='CONFIRMED' else '' }}>CONFIRMED</option>
            <option value="CANCELLED" {{ 'selected' if booking.status=='CANCELLED' else '' }}>CANCELLED</option>
          </select>
        </div>

        <button type="submit" class="btn btn-primary">
          Update Status
        </button>
      </form>

      <p><strong>Payment Status : </strong>{{ booking.payment_status }}</p>
      <p><strong>Amonut : </strong> ₹{{ booking.total_amount }}</p>
    </div>
  </div>

  <h5>Services</h5>

  <table class="table table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Service Name</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody>
      {% for service in services %}
      <tr>
        <td>{{ service.name }}</td>
        <td>₹{{ service.charges }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{{ url_for('admin.manage_booking') }}" class="btn btn-secondary mt-3">
    Back
  </a>
</div>
{% endblock %}